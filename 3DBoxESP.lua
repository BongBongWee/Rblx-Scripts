local P,R,L,C,D=game:GetService("Players"),game:GetService("RunService"),game:GetService("LogService"),workspace.CurrentCamera,Drawing;local LP=P.LocalPlayer;local B,UC,DC={},nil,nil;local function CB()local l={}for i=1,12 do local ln=D.new("Line")ln.Thickness=2;ln.Transparency=1;ln.Visible=false;table.insert(l,ln)end;return l end;local function AB(p)if B[p]then return end B[p]=CB()end;local function RB(p)if B[p]then for _,ln in ipairs(B[p])do ln:Remove()end B[p]=nil end end;for _,p in ipairs(P:GetPlayers())do if p~=LP then AB(p)end end;P.PlayerAdded:Connect(function(p)if p~=LP then AB(p)end end);P.PlayerRemoving:Connect(RB);UC=R.RenderStepped:Connect(function()for p,lines in pairs(B)do if not p.Parent or p==LP or not p.Team or p.Team==LP.Team then for _,l in ipairs(lines)do l.Visible=false end continue end local ch=p.Character local hrp=ch and ch:FindFirstChild("HumanoidRootPart")if ch and hrp then local s=Vector3.new(4,7,4)local cf=hrp.CFrame local pts={}for _,o in ipairs({Vector3.new(-s.X/2,-s.Y/2,-s.Z/2),Vector3.new(-s.X/2,-s.Y/2,s.Z/2),Vector3.new(s.X/2,-s.Y/2,s.Z/2),Vector3.new(s.X/2,-s.Y/2,-s.Z/2),Vector3.new(-s.X/2,s.Y/2,-s.Z/2),Vector3.new(-s.X/2,s.Y/2,s.Z/2),Vector3.new(s.X/2,s.Y/2,s.Z/2),Vector3.new(s.X/2,s.Y/2,-s.Z/2)})do local wp=(cf*CFrame.new(o)).Position local sp,v=C:WorldToViewportPoint(wp)table.insert(pts,{Vector2.new(sp.X,sp.Y),v})end local vis=false for _,pnt in ipairs(pts)do if pnt[2]then vis=true break end end if vis then local edges={{1,2},{2,3},{3,4},{4,1},{5,6},{6,7},{7,8},{8,5},{1,5},{2,6},{3,7},{4,8}}local col=p.TeamColor.Color for i,e in ipairs(edges)do local a,b=pts[e[1]],pts[e[2]]lines[i].From=a[1]lines[i].To=b[1]lines[i].Color=col lines[i].Visible=a[2]and b[2]end else for _,l in ipairs(lines)do l.Visible=false end end else for _,l in ipairs(lines)do l.Visible=false end end end end);DC=L.MessageOut:Connect(function(m)if m=="removeing3dboxes"then if UC then UC:Disconnect()end if DC then DC:Disconnect()end for _,lines in pairs(B)do for _,l in ipairs(lines)do l:Remove()end end B={}print("[3DBoxESP] Disabled.")end end)
